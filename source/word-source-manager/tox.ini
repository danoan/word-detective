[tox]
envlist = format,lint,typecheck,test
isolated_build = true

[testenv:format]
description = Format code with ruff
skip_install = true
deps =
    ruff
commands =
    ruff format word_source_manager tests
    ruff format --check word_source_manager tests

[testenv:lint]
description = Lint code with ruff
skip_install = true
deps =
    ruff
commands =
    ruff check word_source_manager tests

[testenv:typecheck]
description = Type check with mypy
deps =
    mypy
    types-toml
commands =
    mypy word_source_manager

[testenv:test]
description = Run tests with pytest
deps =
    pytest
    pytest-cov
commands =
    pytest tests -v --cov=word_source_manager --cov-report=term-missing

[testenv]
description = Run all checks
deps =
    {[testenv:lint]deps}
    {[testenv:typecheck]deps}
    {[testenv:test]deps}
commands =
    {[testenv:lint]commands}
    {[testenv:typecheck]commands}
    {[testenv:test]commands}
